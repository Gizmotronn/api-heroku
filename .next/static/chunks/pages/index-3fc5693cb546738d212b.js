(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8474:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var o=n(5893),r=n(809),c=n.n(r),i=n(2447),s=n(9008),a=n(5323),l=n.n(a),u=n(8734),d=n.n(u),_=n(7294);function h(){var e=(0,_.useState)(null),t=e[0],n=e[1],r=function(){var e=(0,i.Z)(c().mark((function e(){var t,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("ACCESS_TOKEN"),e.next=3,fetch("/api/projects",{headers:{Authorization:"Bearer ".concat(t)}});case 3:return o=e.sent,e.t0=n,e.next=7,o.json();case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=(0,_.useState)(!1),u=a[0],h=a[1];(0,_.useEffect)((function(){new(d())("01f5fe2a-fed8-437d-b5ec-0ed4a9b8107c").signInWithOTP().showEmailForm().then((function(e){localStorage.setItem("ACCESS_TOKEN",e.oauth_token.access_token),h(!0),r()})).catch((function(e){return console.log(e)}))}),[]),(0,_.useEffect)((function(){null!=localStorage.getItem("ACCESS_TOKEN")&&h(!0)}),[]);return(0,o.jsxs)("div",{className:l().container,children:[(0,o.jsxs)(s.default,{children:[(0,o.jsx)("title",{children:"Client Portal"}),(0,o.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,o.jsxs)("main",{className:l().main,children:[(0,o.jsx)("h1",{className:l().title,children:"Welcome to Your Client Portal"}),u?(0,o.jsxs)("div",{children:[t?(0,o.jsx)("div",{className:l().grid,children:t.map((function(e){return(0,o.jsxs)("div",{className:l().card,children:[(0,o.jsx)("h3",{children:e.name}),(0,o.jsx)("img",{src:e.project_images[0],style:{maxWidth:"100%"}}),(0,o.jsxs)("p",{children:["Led by ",e.project_lead.name]}),(0,o.jsxs)("p",{children:["Due on ",e.due_date.split("T")[0]]})]},e.id)}))}):(0,o.jsx)("p",{children:"You currently have no projects attached to this account."}),(0,o.jsx)("p",{style:{textAlign:"center",cursor:"pointer"},onClick:function(){localStorage.removeItem("ACCESS_TOKEN"),h(!1)},children:"Log Out"})]}):(0,o.jsx)("p",{children:"Log in to view your projects."}),(0,o.jsx)("div",{id:"cotter-form-container",style:{width:300,height:200}})]})]})}},8581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(8474)}])},5323:function(e){e.exports={container:"Home_container__1EcsU",main:"Home_main__1x8gC",footer:"Home_footer__1WdhD",title:"Home_title__3DjR7",description:"Home_description__17Z4F",code:"Home_code__axx2Y",grid:"Home_grid__2Ei2F",card:"Home_card__2SdtB",logo:"Home_logo__1YbrH"}},5024:function(){}},function(e){e.O(0,[125,774,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);